# Remote Mouse 项目需求文档 (PRD)

## 1. 项目概述
本项目旨在开发一款跨平台的远程鼠标控制软件，允许用户通过手机（iOS/Android）在局域网环境下控制电脑（Windows/macOS/Linux）的鼠标光标、点击操作及键盘输入。

## 2. 技术栈选择
*   **移动端 (控制端)**: Flutter (支持 iOS 和 Android)
*   **桌面端 (受控端)**: Python
    *   GUI/系统托盘: `tkinter` 或 `pystray`
    *   系统控制: `pyautogui` (模拟鼠标键盘)
    *   网络通信: `socket` (UDP 用于发现, TCP 用于控制)
*   **通信协议**:
    *   **设备发现**: UDP 广播 (局域网自动扫描)
    *   **指令传输**: TCP Socket (低延迟稳定传输)

## 3. 功能需求详细说明

### 3.1 连接模块
*   **前提条件**: 手机与电脑需连接至同一 WiFi 网络。
*   **电脑端行为**:
    *   启动后在后台运行，监听特定端口。
    *   响应来自手机端的 UDP 扫描请求，返回电脑名称和 IP 地址。
*   **手机端行为**:
    *   启动 App 后进入“设备扫描”页面。
    *   自动/手动发送 UDP 广播。
    *   列表展示扫描到的在线电脑设备。
    *   点击设备名称发起 TCP 连接，连接成功后跳转至控制面板。

### 3.2 鼠标控制模块
手机控制界面主要分为上下两部分布局：

*   **上半部分（触摸板区域）**:
    *   占据屏幕主要空间（约 2/3）。
    *   **移动**: 单指在区域内滑动，控制电脑光标移动（相对位移）。
    *   **点击**: 单指轻触视为左键单击（可选支持）。
*   **下半部分（功能按键区）**:
    *   横向分为三个等宽区域：
        1.  **左侧 (Left Button)**: 点击模拟鼠标**左键**按下/释放。
        2.  **中间 (Scroll Wheel)**: 垂直滑动条区域。在此区域上下滑动，模拟鼠标**滚轮**滚动。
        3.  **右侧 (Right Button)**: 点击模拟鼠标**右键**按下/释放。

### 3.3 键盘与快捷键模块
*   **基础输入**:
    *   提供输入框或按钮唤起手机系统软键盘。
    *   将手机输入的字符实时发送至电脑端。
*   **快捷键/修饰键 (Modifier Keys)**:
    *   界面提供独立的功能键区（如位于底部或侧边栏），包含：`Ctrl`, `Alt`, `Shift`, `Win/Cmd`, `Fn`。
    *   **交互逻辑 (Toggle模式)**:
        1.  点击 `Ctrl`，按键高亮（状态：按下）。
        2.  在软键盘输入 `C`。
        3.  电脑端执行 `Ctrl` + `C` 组合操作。
        4.  再次点击 `Ctrl` 或发送组合键后，按键熄灭（状态：释放，具体逻辑待开发时微调）。

## 4. 非功能需求
*   **低延迟**: 鼠标移动需保证流畅，肉眼无明显卡顿。
*   **鲁棒性**: 处理网络波动情况，断开连接需有提示，并支持重连。
*   **兼容性**: 电脑端 Python 脚本需适配不同分辨率的屏幕映射。

## 5. UI/UX 草图概念
```text
+-----------------------+
|    [ 设备名称: PC1 ]    |
| [Disconnect] [Keyboard]|
+-----------------------+
|                       |
|                       |
|      触 摸 板 区 域     |
|   (Trackpad Area)     |
|                       |
|                       |
+-----------------------+
| 左键       |     右键  |
+-----------------------+
| [Ctrl] [Alt] [Win] ...| <-- 快捷键栏 (可隐藏/展开)
+-----------------------+
```
